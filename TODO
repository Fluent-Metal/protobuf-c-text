Memory allocation:
  * Have broken malloc set a sentinal file which it removes when it makes
    malloc fail.  Loop until the sentinal file remains.

Error propogation:
  * Free allocated memory when errors.

Tests:
  * Add a bunch of tasts of broken text format buffers.
  * Add mcheck or valgrind tests to check for leaking memory.

Documentation:
  * All of it.
